// TEST: Core Module
// Tests memory primitives

func test_core() -> Int {
    // Test malloc and store/load
    let ptr = __builtin_malloc(64)
    __builtin_store64(ptr, 12345)
    let val = __builtin_load64(ptr)
    if val != 12345 { return 1 }
    
    __builtin_store8(ptr, 42)
    let byte = __builtin_load8(ptr)
    if byte != 42 { return 2 }
    
    __builtin_store16(ptr, 1000)
    let short = __builtin_load16(ptr)
    if short != 1000 { return 3 }
    
    __builtin_store32(ptr, 100000)
    let word = __builtin_load32(ptr)
    if word != 100000 { return 4 }
    
    0 // Success
}

func main() -> Int {
    let result = test_core()
    result
}
