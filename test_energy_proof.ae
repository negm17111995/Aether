// Energy budget with different values - proves dynamic
import std
import std.energy.budget

func main() -> Int {
    let data = ae_malloc(80)
    // Store: 10, 20, 30, 40, 50, 60, 70, 80, 90, 100
    ae_store64(data, 10)
    ae_store64(data + 8, 20)
    ae_store64(data + 16, 30)
    ae_store64(data + 24, 40)
    ae_store64(data + 32, 50)
    ae_store64(data + 40, 60)
    ae_store64(data + 48, 70)
    ae_store64(data + 56, 80)
    ae_store64(data + 64, 90)
    ae_store64(data + 72, 100)
    
    // Large budget - should sum all
    let b1 = budget_new(100000)
    let s1 = sum_with_energy(data, 10, b1)
    print(s1)  // Expect: 550
    
    // Small budget - partial
    let b2 = budget_new(200)
    let s2 = sum_with_energy(data, 10, b2)
    print(s2)  // Less than 550
    
    0
}
