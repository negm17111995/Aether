// Aether Stress Test - 2000 x 1MB allocations (2GB)
func test_2gb() -> Int {
    let success = 0
    let i = 0
    while i < 2000 {
        let ptr = __builtin_malloc(1048576)
        if ptr == 0 { return success }
        __builtin_store8(ptr, i % 256)
        success = success + 1
        i = i + 1
    }
    success
}
func main() -> Int { test_2gb() }
